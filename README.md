# warp

## Installation

```bash
yarn install
```

## Running Dev Server
- Open two terminals and enter the below commands into the console

```bash
yarn start
```

```bash
yarn dev:wds
```

## Building and Running Production Server

```bash
yarn prod:build
yarn prod:start
```

## Deploying to HEROKU
- We are going to use heroku pipeline deployments
- Go to heroku dashboard and create two apps `warp-app` and `warp-app-staging`
- In both apps , under Settings > Config Variables, add `NPM_CONFIG_PRODUCTION` set to `false`
- Create a Pipeline, and grant Heroku access to your Github
- Add both apps to the pipeline, make the staging one auto-deploy on changes in master, and enable Review Apps
- The following script pushes the code to heroku
```bash
"heroku-postbuild": "yarn prod:build",
```
-Create a new git branch, make changes and open a Github Pull Request to instantiate a Review App. Check your changes on the Review App URL, and if everything looks good, merge your Pull Request with master on Github. A few minutes later, your staging app should have been automatically deployed. Check your changes on the staging app URL, and if everything still looks good, promote staging to production.

## Explanation
Following technologies have been implemented 

Front-End: React, Redux, React Router, redux-actions, redux-thunk
Back-End: Express, Server-side rendering, HTML template string
Styling: Bootstrap 4, JSS, react-jss
Libs: ImmutableJS, isomorphic-fetch
Linting / Type Checking: ESLint, ESLint Airbnb Config, Flow, Compat
Testing: Jest, fetch-mock, redux-mock-store
Build: Babel, Webpack, babel-plugin-flow-react-proptypes
Infra: Yarn, Webpack Dev Server, PM2, Husky Git Hooks, rimraf
Services: Heroku, Travis, Coveralls

## Travis CI
Travis will detect automatically that you use Yarn because you have a yarn.lock file. Every time you push code to your Github repository, it will run yarn test && yarn prod:build. If nothing goes wrong, you should get a green build.
Create a travis.yml file like below: 
```bash
language: node_js
node_js: node
script: yarn test && yarn prod:build && cat ./coverage/lcov.info | ./node_modules/coveralls/bin/coveralls.js
```

## Coveralls
Pipe the coverage file generated by Jest to the coveralls binary.
Edit your travis.yml file like below 
```bash
script: yarn test && yarn prod:build && cat ./coverage/lcov.info | ./node_modules/coveralls/bin/coveralls.js
```